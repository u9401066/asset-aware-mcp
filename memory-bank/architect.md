# System Architect

> ğŸ“Œ æ­¤æª”æ¡ˆè¨˜éŒ„é‡å¤§æ¶æ§‹æ±ºç­–ï¼Œæ¶æ§‹è®Šæ›´æ™‚æ›´æ–°ã€‚

## ğŸŒ ç³»çµ±æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å°ˆæ¡ˆæ¨¡æ¿çµæ§‹                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ”ï¸ è¦å‰‡å±¤                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚  â”‚ CONSTITUTION â”‚ â”€â”€â”€â”                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                             â”‚
â”‚        â”‚            â–¼                             â”‚
â”‚        â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚        â”œâ”€â”€â”€â”€â–¶â”‚  Bylaws   â”‚                        â”‚
â”‚        â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚        â”‚            â”‚                             â”‚
â”‚        â–¼            â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚    Claude Skills      â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ§  è¨˜æ†¶å±¤                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚     Memory Bank       â”‚                      â”‚
â”‚  â”‚  (7 markdown files)   â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âš™ï¸ å·¥å…·å±¤                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ CI/CD  â”‚ â”‚ Testing â”‚ â”‚ Linting â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›ï¸ æ¶æ§‹æ±ºç­–ç´€éŒ„

### ADR-001: æ¡ç”¨æ†²æ³•-å­æ³•å±¤ç´šæ¶æ§‹

**æ—¥æœŸ**ï¼š2025-12-15

**èƒŒæ™¯**ï¼šéœ€è¦ä¸€å€‹æ¸…æ™°çš„è¦å‰‡å±¤ç´šç³»çµ±

**æ±ºå®š**ï¼šæ¡ç”¨æ†²æ³• â†’ å­æ³• â†’ Skills ä¸‰å±¤çµæ§‹

**ç†ç”±**ï¼š
- æœ€é«˜åŸå‰‡é›†ä¸­åœ¨ CONSTITUTION.md
- ç´°å‰‡å¯åœ¨ bylaws/ æ“´å±•
- Skills å°ˆæ³¨æ–¼æ“ä½œç¨‹åº

### ADR-002: DDD + DAL ç¨ç«‹

**æ—¥æœŸ**ï¼š2025-12-15

**èƒŒæ™¯**ï¼šç¢ºä¿æ¥­å‹™é‚è¼¯èˆ‡è³‡æ–™å­˜å–åˆ†é›¢

**æ±ºå®š**ï¼šRepository ä»‹é¢åœ¨ Domainï¼Œå¯¦ä½œåœ¨ Infrastructure

**ç†ç”±**ï¼š
- æé«˜å¯æ¸¬è©¦æ€§
- Domain ä¸ä¾è³´è³‡æ–™åº«æŠ€è¡“
- å¯æ›¿æ›å„²å­˜å¯¦ä½œ

### ADR-003: uv å„ªå…ˆå¥—ä»¶ç®¡ç†

**æ—¥æœŸ**ï¼š2025-12-15

**èƒŒæ™¯**ï¼šPython å¥—ä»¶ç®¡ç†å·¥å…·é¸æ“‡

**æ±ºå®š**ï¼šå„ªå…ˆä½¿ç”¨ uvï¼Œå¾Œå‚™ pip

**ç†ç”±**ï¼š
- æ¯” pip å¿« 10-100 å€
- åŸç”Ÿæ”¯æ´ lockfile
- èˆ‡ pip å®Œå…¨ç›¸å®¹

## ğŸ“¦ å…ƒä»¶åœ–

```
.claude/skills/          # 12 å€‹ Skills
â”œâ”€â”€ git-precommit/       # ç·¨æ’å™¨
â”œâ”€â”€ ddd-architect/       # æ¶æ§‹
â”œâ”€â”€ code-refactor/       # é‡æ§‹
â”œâ”€â”€ code-reviewer/       # å¯©æŸ¥
â”œâ”€â”€ test-generator/      # æ¸¬è©¦
â”œâ”€â”€ memory-updater/      # è¨˜æ†¶
â”œâ”€â”€ memory-checkpoint/   # æª¢æŸ¥é»
â”œâ”€â”€ readme-updater/      # README
â”œâ”€â”€ changelog-updater/   # CHANGELOG
â”œâ”€â”€ roadmap-updater/     # ROADMAP
â”œâ”€â”€ project-init/        # åˆå§‹åŒ–
â””â”€â”€ git-doc-updater/     # æ–‡æª”æ›´æ–°

.github/bylaws/          # 4 å€‹å­æ³•
â”œâ”€â”€ ddd-architecture.md
â”œâ”€â”€ git-workflow.md
â”œâ”€â”€ memory-bank.md
â””â”€â”€ python-environment.md
```

---
*Last updated: 2025-12-15*



## Architectural Decisions

- æ¡ç”¨ Docling ä½œç‚ºä¸»è¦ ETL å¼•æ“ä»¥ç²å¾—é«˜å“è³ªçš„è¡¨æ ¼èˆ‡ç« ç¯€è­˜åˆ¥
- ä½¿ç”¨ FastMCP ç°¡åŒ– MCP Server é–‹ç™¼æµç¨‹
- æœ¬åœ°å„ªå…ˆå­˜å„²ç­–ç•¥ï¼Œæ‰€æœ‰è³‡ç”¢ä¿ç•™åœ¨ ./data ç›®éŒ„ä¸‹



## Design Considerations

- æ¡ç”¨ DDD æ¶æ§‹ç¢ºä¿æ¥­å‹™é‚è¼¯èˆ‡æŠ€è¡“ç´°ç¯€åˆ†é›¢
- ä½¿ç”¨éåŒæ­¥ Job è™•ç†å¤§å‹ PDF ä»¥é¿å… MCP é€¾æ™‚
- Manifest-first ç­–ç•¥ï¼šAgent æ‡‰å…ˆè®€å–æ¸…å–®å†ç²¾æº–å–ç”¨è³‡ç”¢
- æ”¯æ´ Base64 åœ–ç‰‡å‚³è¼¸ä»¥é…åˆ Vision AI åˆ†æèƒ½åŠ›



## Components

### Presentation Layer (FastMCP)

å¯¦ä½œ MCP å”è­°ï¼Œå®šç¾© Tools èˆ‡ Resourcesã€‚ä½¿ç”¨ FastMCP æ¡†æ¶ã€‚

**Responsibilities:**

- å®šç¾© ingest_documents, fetch_document_asset ç­‰å·¥å…·
- æä¾› document://{id}/outline ç­‰å‹•æ…‹è³‡æº
- è™•ç† MCP è«‹æ±‚èˆ‡å›æ‡‰æ ¼å¼è½‰æ›

### Application Layer (Services)

å”èª¿é ˜åŸŸå°è±¡åŸ·è¡Œæ¥­å‹™æµç¨‹ã€‚è™•ç†éåŒæ­¥ Job ç‹€æ…‹ã€‚

**Responsibilities:**

- DocumentService: å”èª¿ ETL æµç¨‹
- JobService: ç®¡ç†éåŒæ­¥ä»»å‹™ç‹€æ…‹
- AssetService: æª¢ç´¢èˆ‡éæ¿¾æ–‡ä»¶è³‡ç”¢

### Domain Layer (Core)

æ ¸å¿ƒæ¥­å‹™é‚è¼¯èˆ‡å¯¦é«”å®šç¾©ã€‚å®šç¾© Repository ä»‹é¢ã€‚

**Responsibilities:**

- å®šç¾© DocumentManifest å¯¦é«”èˆ‡ Asset å€¼ç‰©ä»¶
- å®šç¾© PDFExtractorInterface èˆ‡ KnowledgeGraphInterface ä»‹é¢
- å¯¦ä½œ ManifestGenerator é ˜åŸŸæœå‹™

### Infrastructure Layer (Adapters)

å¤–éƒ¨æŠ€è¡“å¯¦ä½œã€‚åŒ…å« PDF è§£æèˆ‡çŸ¥è­˜åœ–è­œã€‚

**Responsibilities:**

- DoclingAdapter: ä½¿ç”¨ IBM Docling é€²è¡Œé«˜ç²¾åº¦ PDF è§£æ
- LightRAGAdapter: å¯¦ä½œçŸ¥è­˜åœ–è­œç´¢å¼•èˆ‡æŸ¥è©¢
- FileStorage: è™•ç†æœ¬åœ°æª”æ¡ˆç³»çµ±çš„è®€å¯«èˆ‡åœ–ç‰‡å„²å­˜



